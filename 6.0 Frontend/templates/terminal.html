{% extends "base.html" %}

{% block title %}EhkoForge — Terminal{% endblock %}

{% block area_styles %}
<link rel="stylesheet" href="/css/terminal.css">
{% endblock %}

{% block content %}
<aside class="sidebar terminal-sidebar">
    <!-- Model Selector -->
    <div class="sidebar-section-header">
        <span>Model</span>
    </div>
    <div class="model-selector" id="model-selector">
        <label class="model-option">
            <input type="radio" name="model" value="claude-sonnet-4" checked>
            <span class="model-name">Claude Sonnet 4</span>
        </label>
        <label class="model-option">
            <input type="radio" name="model" value="claude-haiku-4">
            <span class="model-name">Claude Haiku 4</span>
        </label>
        <label class="model-option">
            <input type="radio" name="model" value="gpt-4o">
            <span class="model-name">GPT-4o</span>
        </label>
        <label class="model-option">
            <input type="radio" name="model" value="gpt-4o-mini">
            <span class="model-name">GPT-4o-mini</span>
        </label>
    </div>
    
    <!-- Session History -->
    <div class="sidebar-section-header">
        <span>History</span>
    </div>
    <div class="terminal-sessions-list" id="terminal-sessions-list">
        <!-- Populated by JS -->
    </div>
    
    <button class="new-terminal-btn" id="new-terminal-btn">
        <span class="btn-icon">+</span>
        <span>New Chat</span>
    </button>
    
    <!-- Sidebar Footer -->
    <div class="sidebar-footer">
        <div class="current-model" id="current-model">
            <span class="model-label">Active:</span>
            <span class="model-value">claude-sonnet-4</span>
        </div>
        <div class="ehko-state-sidebar" id="ehko-state-sidebar">
            <span class="state-icon">◇</span>
            <span class="state-text">Nascent</span>
        </div>
    </div>
</aside>

<main class="main-panel terminal-main">
    <!-- Ehko Avatar Zone (Terminal style) -->
    <div class="avatar-zone terminal-avatar-zone" id="avatar-zone">
        <div class="avatar terminal-avatar" id="avatar">
            <div class="avatar-core"></div>
            <div class="terminal-scanlines"></div>
        </div>
        <div class="avatar-status" id="avatar-status">Ready</div>
        <!-- Compact Stats Bar -->
        <div class="stats-bar-compact" id="stats-bar">
            <span class="stat-item" data-stat="identity_depth" title="Identity Depth">◇</span>
            <span class="stat-item" data-stat="clarity" title="Clarity">✦</span>
            <span class="stat-item" data-stat="resonance" title="Resonance">◎</span>
            <span class="stat-item" data-stat="anchors" title="Anchors">⚓</span>
        </div>
    </div>
    
    <!-- Terminal Output Area -->
    <div class="terminal-area" id="terminal-area">
        <div class="terminal-output" id="terminal-output">
            <div class="terminal-welcome">
                <pre class="terminal-ascii">
╔══════════════════════════════════════════════════════════════╗
║                                                              ║
║   ███████╗██╗  ██╗██╗  ██╗ ██████╗                          ║
║   ██╔════╝██║  ██║██║ ██╔╝██╔═══██╗                         ║
║   █████╗  ███████║█████╔╝ ██║   ██║                         ║
║   ██╔══╝  ██╔══██║██╔═██╗ ██║   ██║                         ║
║   ███████╗██║  ██║██║  ██╗╚██████╔╝                         ║
║   ╚══════╝╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝                          ║
║                                                              ║
║   TERMINAL MODE — General AI Assistant                       ║
║   Model: claude-sonnet-4                                     ║
║                                                              ║
╚══════════════════════════════════════════════════════════════╝
                </pre>
                <p class="terminal-hint">> Type a message to begin. Your Ehko remembers everything.</p>
            </div>
        </div>
    </div>
    
    <!-- Terminal Input -->
    <div class="terminal-input-bar" id="terminal-input-bar">
        <span class="terminal-prompt">&gt;</span>
        <input 
            type="text" 
            id="terminal-input" 
            placeholder="Enter command..."
            autocomplete="off"
        >
        <button class="terminal-send-btn" id="terminal-send-btn" title="Send">
            ↵
        </button>
    </div>
</main>

<!-- Model Switch Warning Modal -->
<div class="modal-overlay" id="model-switch-overlay">
    <div class="modal-panel terminal-modal">
        <div class="modal-header">
            <h2>Switch Model?</h2>
        </div>
        <div class="modal-content">
            <p>Switching models will start a new chat session.</p>
            <p class="modal-hint">Your Ehko remembers everything, so no context is truly lost.</p>
        </div>
        <div class="modal-actions">
            <button class="modal-cancel" id="model-switch-cancel">Cancel</button>
            <button class="modal-confirm" id="model-switch-confirm">Switch Model</button>
        </div>
    </div>
</div>
{% endblock %}

{% block area_scripts %}
<script src="/js/terminal.js"></script>
{% endblock %}
