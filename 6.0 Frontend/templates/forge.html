{% extends "base.html" %}

{% block title %}EhkoForge ‚Äî Forge{% endblock %}

{% block area_styles %}
<link rel="stylesheet" href="/css/forge.css">
{% endblock %}

{% block content %}
<aside class="sidebar forge-sidebar">
    <!-- Ingot Queue Header -->
    <div class="sidebar-section-header">
        <span>Surfaced Ingots</span>
        <button class="refresh-btn" id="refresh-ingots" title="Refresh">‚Üª</button>
    </div>
    
    <!-- Ingot Filters -->
    <div class="ingot-filters">
        <select id="ingot-filter-tier">
            <option value="">All Tiers</option>
            <option value="mythic">üíé Mythic</option>
            <option value="gold">ü•á Gold</option>
            <option value="silver">ü•à Silver</option>
            <option value="iron">‚öôÔ∏è Iron</option>
            <option value="copper">üî∂ Copper</option>
        </select>
    </div>
    
    <!-- Ingot List -->
    <div class="ingot-list" id="ingot-list">
        <!-- Populated by JS -->
    </div>
    
    <!-- Smelt Status -->
    <div class="smelt-status" id="smelt-status">
        <div class="smelt-header">
            <span>Smelt Queue</span>
        </div>
        <div class="smelt-info">
            <span id="smelt-pending">0 pending</span>
            <button class="smelt-btn" id="run-smelt" title="Run Smelt">‚öíÔ∏è Smelt</button>
        </div>
    </div>
    
    <!-- Sidebar Footer -->
    <div class="sidebar-footer">
        <div class="ehko-state-sidebar" id="ehko-state-sidebar">
            <span class="state-icon">‚óá</span>
            <span class="state-text">Nascent</span>
        </div>
    </div>
</aside>

<main class="main-panel forge-main">
    <!-- Ehko Avatar Zone -->
    <div class="avatar-zone" id="avatar-zone">
        <div class="avatar" id="avatar">
            <div class="avatar-core"></div>
            <div class="avatar-ring avatar-ring-1"></div>
            <div class="avatar-ring avatar-ring-2"></div>
        </div>
        <div class="avatar-status" id="avatar-status">Ready</div>
        <!-- Compact Stats Bar -->
        <div class="stats-bar-compact" id="stats-bar">
            <span class="stat-item" data-stat="identity_depth" title="Identity Depth">‚óá</span>
            <span class="stat-item" data-stat="clarity" title="Clarity">‚ú¶</span>
            <span class="stat-item" data-stat="resonance" title="Resonance">‚óé</span>
            <span class="stat-item" data-stat="anchors" title="Anchors">‚öì</span>
        </div>
    </div>
    
    <!-- Ingot Detail Area -->
    <div class="ingot-area" id="ingot-area">
        <div class="ingot-detail" id="ingot-detail">
            <div class="ingot-empty">
                <p>Select an ingot from the queue to review.</p>
                <p class="subtle">Accept valuable insights to forge them into your Ehko.</p>
            </div>
        </div>
    </div>
</main>

<!-- Ingot Detail Modal (for mobile/alternative view) -->
<div class="ingot-overlay" id="ingot-overlay">
    <div class="ingot-modal">
        <div class="ingot-modal-header">
            <h2>Ingot Details</h2>
            <button class="close-ingot-modal" id="close-ingot-modal">√ó</button>
        </div>
        <div class="ingot-modal-content" id="ingot-modal-content">
            <!-- Populated by JS -->
        </div>
        <div class="ingot-modal-actions">
            <button class="ingot-reject" id="ingot-reject">
                <span>‚úó</span> Reject
            </button>
            <button class="ingot-defer" id="ingot-defer">
                <span>‚è∏</span> Defer
            </button>
            <button class="ingot-accept" id="ingot-accept">
                <span>‚óà</span> Forge into Ehko
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block area_scripts %}
<script src="/js/forge.js"></script>
{% endblock %}
